<!DOCTYPE html>
<html>

<head>
  <base target="_top">
  <?!= include('CSS') ?>
</head>

<body>
  <main class="container">
    <h1 class="mb-5 fw-bold text-primary-emphasis d-flex justify-content-center mt-4">OB Fallidos</h1>
    <div id="liveAlertPlaceholder"></div>
    <div class="d-flex justify-content-between mb-4">
      <div class="col">
        <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#createModal"
          onclick="handleShowModalUser()"><i class="bi bi-plus-lg"></i> Agregar</button>
      </div>
      <div class="col-3">
        <div class="input-group">
          <input type="text" class="form-control" placeholder="Buscar por DNI, Telefono, Codigo"
            aria-label="Recipient's username" aria-describedby="button-addon2">
          <button class="btn btn-outline-secondary" type="button" id="button-addon2">Buscar</button>
        </div>
      </div>
    </div>
    <!-- Tabla de todos los clientes -->
    <div class="table-responsive">
      <table class="table table-hover">
        <thead>
          <tr>
            <td>PaÃ­s</td>
            <td>Nombre</td>
            <td>Apellido</td>
            <td>Telefono</td>
            <td>Nro doc</td>
            <td>Codigo</td>
            <td>Referente</td>
            <td>Fecha</td>
            <td>Estaus Web</td>
            <td>Producto</td>
            <td>Estatus Riesgo</td>
            <td>Acciones</td>
          </tr>
        </thead>
        <tbody id="tableBody-users">

        </tbody>
      </table>
    </div>

  </main>

  <template id="rowTemplate">
    <tr>
      <td class="template-country"></td>
      <td class="template-name"></td>
      <td class="template-lastName"></td>
      <td class="template-phone"></td>
      <td class="template-dni"></td>
      <td class="template-cod"></td>
      <td class="template-referent"></td>
      <td class="template-dateOfFirstContact"></td>
      <td class="template-statusWeb"></td>
      <td class="template-product"></td>
      <td class="template-statusRisk"></td>
      <td class="template-actions text-center">
        <i class="bi bi-pencil-square button-edit me-3" role="button" onclick="handleUpdateUserInfo(this)">
        </i>
      </td>
    </tr>
  </template>

  <!-- Modal to Create Client -->
  <div class="modal fade modal-lg modal-dialog-scrollable" id="createModal" tabindex="-1"
    aria-labelledby="createModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title fs-5" id="createModalLabel">ðŸªª Cliente</h1>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <form name="createUser" id="createUser" class="needs-validation mb-3" novalidate>
            <div class="row mb-3">
              <div class="mb-3">
                <input type="text" class="form-control" aria-label="userId" name="userId" id="userId" placeholder="#"
                  hidden />
              </div>
              <div class="col">
                <div class="form-floating">
                  <input type="text" class="form-control" id="userName" name="userName" placeholder="Nombre">
                  <label for="userName">Nombre</label>
                </div>
              </div>
              <div class="col">
                <div class="form-floating">
                  <input type="text" class="form-control" id="userLastName" name="userLastName"
                    placeholder="Apellido" />
                  <label for="userLastName">Apellido</label>
                </div>
              </div>
            </div>
            <div class="row mb-3">
              <div class="col">
                <div class="form-floating">
                  <input type="number" class="form-control" id="userPhone" name="userPhone" required
                    placeholder="Telefono" />
                  <label for="userPhone">Telefono *</label>
                  <div class="invalid-feedback">
                    Por favor, ingresar un numero de telefono
                  </div>
                </div>
              </div>
              <div class="col">
                <div class="form-floating">
                  <input type="number" class="form-control" id="userDni" name="userDni" placeholder="DNI" />
                  <label for="userDni">DNI</label>
                </div>
              </div>
              <div class="col">
                <div class="form-floating">
                  <input type="number" class="form-control" id="userCod" name="userCod" placeholder="Codigo" />
                  <label for="userCod">Codigo</label>
                </div>
              </div>
            </div>
            <div class="row mb-3">
              <div class="col">
                <div class="form-floating">
                  <input type="text" class="form-control" id="userStatusWeb" name="userStatusWeb"
                    placeholder="Estaus Web" />
                  <label for="userStatusWeb">Estaus Web</label>
                </div>
              </div>
              <div class="col">
                <div class="form-floating">
                  <input type="text" class="form-control" id="userReferent" name="userReferent"
                    placeholder="Referente" />
                  <label for="userReferent">Referente</label>
                </div>
              </div>
              <div id="userDateFirstContact">
                <input type="date" id="userDateOfFirstContact" name="userDateOfFirstContact" />
              </div>
            </div>
            <div class="row mb-3">
              <div class="col">
                <select class="form-select" aria-label="Default select example" id="userCountry" required
                  name="userCountry">
                  <option selected value="">Pais *</option>
                  <option value="PE">PE</option>
                  <option value="MX">MX</option>
                </select>
                <div class="invalid-feedback">
                  Por favor, ingresar el pais
                </div>
              </div>
              <div class="col">
                <select class="form-select" aria-label="Default select example" id="userProduct" name="userProduct">
                  <option selected value="">Producto</option>
                  <option value="P7">P7</option>
                  <option value="Prestamo Personal">Prestamo Personal</option>
                  <option value="Servicios Digitales-MX">Servicios Digitales-MX</option>
                  <option value="Servicios Digitales-PE">Servicios Digitales-PE</option>
                </select>
              </div>
              <div class="col">
                <select class="form-select" aria-label="Default select example" id="userStatusRisk"
                  name="userStatusRisk">
                  <option selected value="">Estatus Riesgo</option>
                  <option value="DNI y Docs">DNI y Docs</option>
                  <option value="Califica">Califica</option>
                  <option value="No califica">No califica</option>
                  <option value="Por terminar OBWeb">Por terminar OBWeb</option>
                  <option value="Cliente afiliado">Cliente afiliado</option>
                  <option value="Cliente Prueba">Cliente Prueba</option>
                  <option value="CURP InvÃ¡lido">CURP InvÃ¡lido</option>
                  <option value="OB_web_cul">OB_web_cul</option>
                </select>
              </div>
            </div>
          </form>

          <p class="fs-5 fw-semibold text-primary-emphasis d-flex justify-content-center mt-5 mb-1"
            id="comentCallTitle">Tipificaciones</p>

          <p class="fs-5 fw-semibold text-primary-emphasis d-flex justify-content-center mt-5 mb-3 d-none"
            id="noComentsCall">No hay
            tipificaciones
            registradas</p>
          <div class="d-flex justify-content-center d-none mt-5 mb-3" id="loadingComenstCall">
            <div class="spinner-border" role="status">
              <span class="visually-hidden">Cargando tipificaciones...</span>
            </div>
          </div>

          <!-- Seccion de tipificaciones -->
          <div class="accordion mt-5 mb-3" id="comentsCallsConatiner">
          </div>

          <template id="comentsCallTemplate">
            <div class="accordion-item">
              <h2 class="accordion-header">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target=""
                  aria-expanded="false" aria-controls="">
                  <!-- Titulo de la tipificacion -->
                </button>
              </h2>
              <div id="" class="accordion-collapse collapse">
                <div class="accordion-body">
                  <!-- Informacion de la tipificacion -->
                </div>
              </div>
            </div>
          </template>

        </div>
        <div class="modal-footer d-flex justify-content-space-between">
          <button class="btn btn-outline-secondary" data-bs-target="#secondaryModal" id="comentCallBtn"
            data-bs-toggle="modal">Tipificar</button>
          <button type="submit" class="btn btn-primary" id="createUserOBF"
            onclick="handleSaveChanges()">Guardar</button>
          <button class="btn btn-primary d-none btnLoading" id="loadingButton" type="button" disabled>
            <span class="spinner-border spinner-border-sm" aria-hidden="true"></span>
            <span role="status">Guardando...</span>
        </div>
      </div>
    </div>
  </div>

  <!-- Modal de Tipificaciones -->
  <div class="modal fade" id="secondaryModal" aria-hidden="true" aria-labelledby="exampleModalToggleLabel2"
    tabindex="-1">
    <div class="modal-dialog modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h1 class="modal-title fs-5" id="exampleModalToggleLabel2">Tipificacion</h1>
          <button type="button" class="btn-close" data-bs-target="#createModal" data-bs-toggle="modal"></button>
        </div>
        <div class="modal-body">
          <form name="createTipificacion" id="createTipificacion" class="needs-validation" novalidate>
            <div class="row mb-3">
              <div class="col">
                <div class="form-floating">
                  <input type="text" class="form-control" id="callAgentName" placeholder="Nombre">
                  <label for="callAgentName">Asesor</label>
                </div>
                <input type="text" class="form-control" aria-label="clientPhone" name="clientPhone" id="clientPhone"
                  placeholder="#" hidden />
              </div>
            </div>
            <div class="row mb-3">
              <div class="col">
                <select class="form-select" aria-label="Medios de contacto" id="callViaOfCalling">
                  <option selected value="">Medio de contacto</option>
                  <option value="XCALLY">XCALLY</option>
                  <option value="Dinamico">Dinamico</option>
                  <option value="Corporativo">Corporativo</option>
                  <option value="WhatsApp">WhatsApp</option>
                </select>
              </div>
              <div class="col">
                <select class="form-select" aria-label="Resultado de la llamada" id="callResults">
                  <option selected value="">Resultado</option>
                  <option value="Contestada">Contestada</option>
                  <option value="Buzon">Buzon</option>
                  <option value="Corta llamada">Corta llamada</option>
                  <option value="Numero equivocado">Numero equivocado</option>
                  <option value="Tercero (Reagenda)">Tercero (Reagenda)</option>
                  <option value="Reagenda">Reagenda</option>
                  <option value="Timbra y no contesta">Timbra y no contesta</option>
                  <option value="Sin respuesta">Sin respuesta</option>
                </select>
              </div>
            </div>
            <div class="row mb-3">
              <div class="col">
                <select class="form-select" aria-label="Estatus de la Gestion" id="callStatusClient">
                  <option selected value="">Estatus de la Gestion</option>
                  <option value="Afiliado">Afiliado</option>
                  <option value="No afiliado">No afiliado</option>
                  <option value="Pendientes de subsanar documentos - seguimiento">Pendientes de subsanar documentos -
                    seguimiento</option>
                  <option value="No afiliado - rubro no aplica">No afiliado - rubro no aplica</option>
                  <option value="No afiliado - no tiene negocio">No afiliado - no tiene negocio</option>
                  <option value="No afiliado - desacuerdo con terminos">No afiliado - desacuerdo con terminos</option>
                  <option value="No afiliado - sin contacto">No afiliado - sin contacto</option>
                  <option value="Sin contacto - Pendiente de regularizar">Sin contacto - Pendiente de regularizar
                  </option>
                  <option value="No afiliado - No califica">No afiliado - No califica</option>
                </select>
              </div>
              <div class="col">
                <select class="form-select" aria-label="Motivos de no afiliacion" id="callReasonToNotAfiliate">
                  <option selected value="">Motivos de no afiliacion</option>
                  <option value="Inconforme con cobros">Inconforme con cobros</option>
                  <option value="Falta de documentos">Falta de documentos</option>
                  <option value="Exede el limite de edad">Exede el limite de edad</option>
                  <option value="DNI vencido">DNI vencido</option>
                  <option value="No tiene boletas">No tiene boletas</option>
                  <option value="Sin Negocio">Sin Negocio</option>
                  <option value="Rubro no aplica">Rubro no aplica</option>
                  <option value="No pasa evaluacion">No pasa evaluacion</option>
                  <option value="No le interesa, no da mas razon">No le interesa, no da mas razon</option>
                  <option value="Pago de comision o Intereses">Pago de comision o Intereses</option>
                  <option value="Sin contacto">Sin contacto</option>
                </select>
              </div>
            </div>
            <div class="form-floating">
              <textarea class="form-control" placeholder="Comentarios de la llamada" id="callComentsOfCalling"
                style="height: 150px"></textarea>
              <label for="comentsOfCalling">Cometarios</label>
            </div>
          </form>
        </div>
        <div class="modal-footer d-flex justify-content-between">
          <button class="btn btn-outline-secondary" data-bs-target="#createModal" data-bs-toggle="modal">Volver</button>
          <button class="btn btn-primary" data-bs-dismiss="modal" aria-label="Close"
            onclick="handleSaveComentsCall()">Guardar</button>
          <button class="btn btn-primary d-none btnLoading" id="loadingButtonTipificacion" type="button" disabled>
            <span class="spinner-border spinner-border-sm" aria-hidden="true"></span>
            <span role="status">Guardando...</span>
        </div>
      </div>
    </div>
  </div>


  <?!= include('JS') ?>
</body>

</html>